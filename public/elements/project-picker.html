<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="../bower_components/iron-dropdown/iron-dropdown.html">
<link rel="import" href="../bower_components/polymerfire/firebase-auth.html">
<link rel="import" href="../bower_components/polymerfire/firebase-query.html">

<dom-module id="project-picker">
  <template>
    <style>
      [slot="dropdown-content"] {
        background-color: white;
        line-height: 40px;
        padding: 0 10px 0 10px;
        box-shadow: 0px 2px 6px #ccc;
        list-style: none;
      }
      ul, li {
        display: block;
        position: relative;
        margin: 0;
        padding: 0;
      }
    </style>
    <firebase-auth user="{{user}}"></firebase-auth> 
    <firebase-query
      id="projectQuery"
      path="/users/[[user.uid]]/projects"
      data="{{projects}}">
    </firebase-query>

    <iron-dropdown id="dropdown">
      <ul slot="dropdown-content">
        <template is="dom-repeat" items="[[projects]]" as="project">
          <li val$="[[project.$key]]">[[project.name]]</li>
        </template>
      </ul>
    </iron-dropdown>
  </template>

  <script>
    class ProjectPicker extends Polymer.Element {
      static get is() { return 'project-picker'; }

      static get properties() {
        return {
          newProject: {
            type: String,
            observer: '_changeProject'
          }
        }
      }

      toggle() {
        this.$.dropdown.toggle();
      }

      _changeProject(newVal, oldVal) {
        console.log(newVal);
      }

    }

    window.customElements.define(ProjectPicker.is, ProjectPicker);
  </script>
</dom-module>
