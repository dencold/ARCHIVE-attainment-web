<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="../bower_components/paper-dropdown-menu/paper-dropdown-menu.html">
<link rel="import" href="../bower_components/paper-listbox/paper-listbox.html">
<link rel="import" href="../bower_components/paper-item/paper-item.html">
<link rel="import" href="../bower_components/polymerfire/firebase-auth.html">
<link rel="import" href="../bower_components/polymerfire/firebase-document.html">
<link rel="import" href="../bower_components/polymerfire/firebase-query.html">

<dom-module id="project-picker">
  <template>
  
    <firebase-auth user="{{user}}"></firebase-auth> 
    <firebase-query
      id="projectQuery"
      path="/users/[[user.uid]]/projects"
      data="{{projects}}">
    </firebase-query>

    <paper-dropdown-menu label="Change Project">
      <paper-listbox slot="dropdown-content" attr-for-selected="val" selected="{{newProject}}">
          <template is="dom-repeat" items="[[projects]]" as="project">
            <paper-item val$="[[project.$key]]">[[project.name]]</paper-item>
          </template>
      </paper-listbox>
    </paper-dropdown-menu>
  </template>

  <script>
    class ProjectPicker extends Polymer.Element {
      static get is() { return 'project-picker'; }

      static get properties() {
        return {
          newProject: {
            type: String,
            observer: '_changeProject'
          }
        }
      }

      _changeProject(newVal, oldVal) {
        console.log(newVal);
      }

    }

    window.customElements.define(ProjectPicker.is, ProjectPicker);
  </script>
</dom-module>
